/* ヘッダファイル */
#include "PlayerAdventMoveLogic.h"
#include "../../Library/Math/Define/MathDefine.h"
#include "../../Library/Debug/Helper/DebugHelper.h"


//-------------------------------------------------------------
//!
//! @brief コネクトウォーズ
//! @brief コネクトウォーズ関連の名前空間
//!
//-------------------------------------------------------------
namespace ConnectWars
{
    /*************************************************************//**
     *
     *  @brief  コンストラクタ
     *  @param  なし
     *
     ****************************************************************/
    C_PlayerAdventMoveLogic::C_PlayerAdventMoveLogic()
    {
    }


    /*************************************************************//**
     *
     *  @brief  デストラクタ
     *  @param  なし
     *
     ****************************************************************/
    C_PlayerAdventMoveLogic::~C_PlayerAdventMoveLogic()
    {
    }


    /*************************************************************//**
     *
     *  @brief  移動量を設定する
     *  @param  移動量
     *  @return なし
     *
     ****************************************************************/
    void C_PlayerAdventMoveLogic::SetMovement(float movement)
    {
        movement_ = movement;
    }


    /*************************************************************//**
     *
     *  @brief  ディープコピーを行う
     *  @param  なし
     *  @return 自身のコピー
     *
     ****************************************************************/
    C_RigidBodyMoveLogic* C_PlayerAdventMoveLogic::DeepCopy()
    {
        return newEx C_PlayerAdventMoveLogic();
    }


    /*************************************************************//**
     *
     *  @brief  移動終了か確認する
     *  @param  なし
     *  @return 移動終了の場合    ：true
     *  @return 移動終了でない場合：false
     *
     ****************************************************************/
    bool C_PlayerAdventMoveLogic::IsMoveFinish() const
    {
        return (finishCount == frameCounter_.GetCount()) ? true : false;
    }


    /*************************************************************//**
     *
     *  @brief  非公開の処理を行う
     *  @param  剛体
     *  @return なし
     *
     ****************************************************************/
    void C_PlayerAdventMoveLogic::DoProcess(RigidBody* pRigidBody)
    {
        if (finishCount == frameCounter_.GetCount()) return;
        
        // 加える座標と移動量
        Physics::Vector3 addPosition = Physics::Vector3(0.0f, 0.0f, 0.0f);

        if (frameCounter_.GetCount() < 40)
        {
            addPosition = Physics::Vector3(0.2f, 0.3f, 0.0f);
        }
        else if (frameCounter_.GetCount() < 50)
        {
            addPosition = Physics::Vector3(0.1f, 0.1f, 0.0f);
        }
        else if (frameCounter_.GetCount() < 60)
        {
            addPosition = Physics::Vector3(0.1f, -0.1f, 0.0f);
        }
        else
        {
            addPosition = Physics::Vector3(0.0f, -0.1f, 0.0f);
        }

        // 座標を加える
        pRigidBody->AddPosition(addPosition);
    
        frameCounter_.CountUp();
    }
}